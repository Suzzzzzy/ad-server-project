# 목차
1. [프로젝트명](#프로젝트명)
2. [프로젝트 설명](#프로젝트-설명)
3. [프로젝트 실행 방법](#프로젝트-실행-방법)

(과제관련 문서)
- [새로운 광고 송출 및 트래픽 대응 방법 - 과제3](#새로운-광고-송출-및-트래픽-대응-방법---과제3)
- [리워드 부정 수급 차단 방법 - 과제6](#리워드-부정-수급-차단-방법---과제6)

* * *

# 프로젝트명
 > ad-server-project

# 프로젝트 설명

### 개발
- Go언어를 사용했습니다.
- **Gin** web 프레임워크를 사용했습니다.

### 데이터베이스
- MySQL
- 관계형 데이터베이스로 가장 많이 쓰이는 MySQL 사용했습니다.

### 설계
- Clean Architecture
- 광고 송출 정책이 추가됨을 고려하여 유지보수가 쉽도록, 계층이 분리되어 있으며 간단한 서버 구현에 적합한 Clean Architecture로 설계했습니다.
```bash
ad-server-project
├── src
    └── adapter
    └── domain
      └── model
    └── repository
    └── usecase
    └── main.go
├── initdb.d

```
- model: 개체의 구조와 메서드 정의합니다.
- repository: 데이터베이스와 연결, 데이터 처리를 담당합니다.
- usecase: 데이터를 가공, 비지니스 로직을 처리합니다.
- adapter: usecase의 output을 가져와 표시합니다.


# 프로젝트 실행 방법
프로젝트를 다운받아 프로젝트 폴더로 이동합니다.
```bash
git clone https://github.com/buzzvil-assignments/sooutt-naver.com.git

cd ad-server-project
```
서버를 실행합니다.
```bash
make up
```
- 해당 명령어를 실행 하면, 프로젝트 이미지를 build 하여 docker-compose 로 띄우게 됩니다.
- MySQL 데이터베이스를 완전하게 띄운 후에 서버를 실행하도록 했습니다.
- 데이터베이스를 docker-compose 로 구성하면서, 필요한 리소스 데이터를 initdb sql 파일을 이용하여 import 합니다.

http://localhost/ 접속했을 때, "Hello world"가 출력된다면 서버가 정상적으로 실행된 것입니다.


* * *
* * *

# 새로운 광고 송출 및 트래픽 대응 방법 - 과제3

### 새로운 광고 송출 정책을 추가하는 방법

- DB에서 광고 정보의 country, gender 조건에 맞는 광고를 먼저 리스트로 받아옵니다.
- 조건에 맞는 광고 중 송출되는 광고를 선택하는 메서드를 정책에 따라 구현합니다.
- 정책을 한 개의 함수 단위로 구현하기 때문에 정책 추가가 쉽습니다.
- 또한 적용하는 정책 메서드만 바꿔주면 되기 때문에 정책 변경 적용도 용이합니다.

### 트래픽의 증가, 데이터의 증가에 따른 성능 문제에 대응하기 위해 적용한 부분

실제 프로젝트에 적용하지는 못했지만, 캐시 데이터를 사용해 볼 것 입니다.
- country, gender 에 맞는 광고를 조회하여 캐싱합니다.
- 한 유저에게 계속적으로 광고를 송출할 때, 반복적으로 쿼리를 할 필요 없이 해당 유저 조건에 맞는 데이터를 캐시 메모리에서 바로 가져올 수 있습니다.

# 리워드 부정 수급 차단 방법 - 과제6
